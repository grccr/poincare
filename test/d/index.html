<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Poincare</title>
  <style type="text/css">
    html, body {
      padding: 0;
      margin: 0;
    }
    a {
      position: absolute;
      top: 50px;
      left: 50px;
      display: inline-block;
      color: white;
      background-color: black;
      border: 2px solid white;
      padding: 3px;
    }
  </style>
</head>
<body>
  <div class="graph" id="ashberry" style="width: 100%; height: 100%; position: absolute;"></div>
  <a href="#" onclick="stop()">STOP</a>
  <script src="/dist/poincare.js"></script>
  <script>
  function stop() {
    PN.stop();
  }

  if (poincare.env == 'production' || poincare.env == 'stage') {

    var pn = new poincare.Poincare({
      container: '.graph',
      icons: {
        source: '/assets/icons/electric-icon.png',
        size: 16
      },
      directions: {
        show: true
      },
      physics: {
        stableThreshold: 100,
        springLength: 100,
      },
      plugins: [
        poincare.plugins.Tween, poincare.plugins.Events,
        poincare.plugins.Zoom, poincare.plugins.Lighter,
        poincare.plugins.Radius, poincare.plugins.Labels,
        poincare.plugins.Cursors, poincare.plugins.AutoResize,
        poincare.plugins.LineIndex, poincare.plugins.Directions
      ]
    });

    // SOME GRAPH EVENT HANDLERS

    pn.on('nodetip.over', id => pn.labels.highlight([id]));
    pn.on('linktip.over', (id) => {
      const item = pn._core.link(id);
      pn.labels.highlight([item.fromId, item.toId]);
    });

    pn.on('nodemenu', (id) => {
      const item = pn.graph().getNode(id);
      console.debug('Node menu clicked', id, item);
    });

    pn.on('linkmenu', (id) => {
      const item = pn._core.link(id);
      console.debug('Link menu clicked', id, item);
      return false;
    });

    pn.on('nodeclick', (id) => {
      const item = pn.graph().getNode(id);
      console.debug('Node clicked', id, item);
    });
    pn.on('linkclick', (id) => {
      const item = pn._core.link(id);
      console.debug('Link clicked', id, item);
    });
    pn.on('nodeover', (id) => {
      pn.lighter.light([id]);
      console.debug('Node over', id);
    });
    pn.on('nodeout', (id) => {
      pn.lighter.light([]);
      pn.labels.highlight([]);
      console.debug('Node out', id);
    });
    pn.on('linkover', (id) => {
      const item = pn._core.link(id);
      pn.lighter.lightLink([id]);
      pn.lighter.light([item.fromId, item.toId]);
      console.debug('Link over', id);
    });
    pn.on('linkout', (id) => {
      pn.lighter.lightLink([]);
      pn.lighter.light([]);
      pn.labels.highlight([]);
      console.debug('Link out', id);
    });

    var myGraph = {
      nodes: [
        { v: '1', value: { label: 'Капуста' } },
        { v: '2', value: { label: 'Морковка' } }
      ],
      edges: [
        { v: '1', w: '2', value: { label: 3 } }
      ],
      options: { directed: true }
    };

    pn.graph(poincare.parsers.NGraph.fromJSON(myGraph));
    pn.zoom.alignToCenter();
    pn.run();
  }
  </script>
</body>
</html>